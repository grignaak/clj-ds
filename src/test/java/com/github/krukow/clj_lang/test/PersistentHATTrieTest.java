/**
 * 
 */
package com.github.krukow.clj_lang.test;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNull;

import java.util.Map;

import org.junit.Test;

import com.github.krukow.clj_lang.PersistentHATTrie;

/**
 * @author krukow
 *
 */
public class PersistentHATTrieTest {


	PersistentHATTrie<Integer> createTrie() {
		return PersistentHATTrie.EMPTY
		        .plus("we",0)
		        .plus("were",1)
        		.plus("went",2)
        		.plus("west",3)
        		.plus("water",4)
        		.plus("western",5)
        		.plus("tri",6)
        		.plus("fork",7)
        		.plus("trifork",8)
        		.plus("forks",9);
	}
	@Test
	public final void testSmallTrie() {
		PersistentHATTrie trie = createTrie();
		assertEquals(10, trie.size());
		
		assertEquals(0, trie.get("we"));
		assertEquals(1, trie.get("were"));
		assertEquals(2, trie.get("went"));
		assertEquals(3, trie.get("west"));
		assertEquals(4, trie.get("water"));
		assertEquals(5, trie.get("western"));
		assertEquals(6, trie.get("tri"));
		assertEquals(7, trie.get("fork"));
		assertEquals(8, trie.get("trifork"));
		assertEquals(9, trie.get("forks"));		
	}
	
	@Test
	public final void doesNotContainNotAdded() {
		PersistentHATTrie trie = createTrie();
		assertNull(trie.get("wes"));
		assertNull(trie.get("w"));
		assertNull(trie.get("wents"));
		assertNull(trie.get("westee"));
		assertNull(trie.get("tris"));
		assertNull(trie.get("sfork"));
		assertNull(trie.get("tri2fork"));
		assertNull(trie.get("forksa"));		
	}
	
	@Test
	public final void testIterator() {
		PersistentHATTrie<Integer> trie = createTrie();
		int count =0;
		System.out.println(trie.toString());
		for (Map.Entry<String, Integer> s:trie) {
			System.out.println(s);
			count++;
		}
		assertEquals(10,count);
	}
}
